apply plugin: 'groovy'

import java.util.regex.Matcher

task version << {
    println readVersion('CHANGELOG').version
}

def readVersion(path) {
    def log = new Log();
    File f = file(path)
    f.eachLine {
        Matcher match = it =~ /^Ver.*\s(.*?)$/
        if (match && log.version.isEmpty()) {
            log.version = match.group(1)
         }
    }
    return log
}

